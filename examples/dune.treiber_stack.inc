; This file is generated by ortac dune qcheck-stm
; It contains the rules for generating and running QCheck-STM tests for treiber_stack_spec.mli

(rule
 (alias runtest)
 (mode promote)
 (package ortac-examples)
 (deps
  (package ortac-qcheck-stm))
 (targets treiber_stack_spec_tests.ml)
 (action
  (setenv
   ORTAC_ONLY_PLUGIN
   qcheck-stm
   (with-stdout-to
    %{targets}
    (run
     ortac
     qcheck-stm
     %{dep:treiber_stack_spec.mli}
     %{dep:treiber_stack_spec_config.ml}
     --quiet
     --count=500
     --domain)))))

(executable
 (name treiber_stack_spec_tests)
 (public_name treiber_stack_spec_tests)
 (package ortac-examples)
 (modules treiber_stack_spec_tests)
 (libraries
  treiber_stack_spec
  qcheck-stm.stm
  qcheck-stm.domain
  qcheck-multicoretests-util
  ortac-runtime-qcheck-stm.domain))

(rule
 (alias launchtests)
 (package ortac-examples)
 (action
  (run
   %{dep:treiber_stack_spec_tests.exe}
   --verbose)))
